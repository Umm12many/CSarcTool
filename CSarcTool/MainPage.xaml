<Page xmlns:hd="using:Uno.UI.HotDesign" xmlns:markup="using:Uno.UI.Markup" x:Class="CSarcTool.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:CSarcTool"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:um="using:Uno.Material"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid Background="{ThemeResource BrushBackground}">
        <ScrollViewer>
            <StackPanel Margin="32,24">
                <StackPanel Margin="0,0,0,8">
                    <TextBlock Foreground="{ThemeResource BrushOnSurface}" FontWeight="Bold" FontSize="32" Text="CSarcTool" />
                    <TextBlock Margin="0,8,0,0" Foreground="{ThemeResource BrushOnSurfaceVariant}" FontSize="16" Text="Yaz0 and SARC compressing/decompressing tool for Switch and Wii U files ported from python and given a GUI by Umm12many, originally by MasterVermilli0n / AboodXD" />
                </StackPanel>

                <!-- Status Bar -->
                <Grid Margin="0,12">
                    <ProgressBar x:Name="StatusProgressBar" IsIndeterminate="True" Visibility="Collapsed" />
                    <TextBlock x:Name="StatusTextBlock" Foreground="{ThemeResource BrushAccent}" FontWeight="SemiBold" Text="" HorizontalAlignment="Center" Margin="0,8" />
                </Grid>

                <!-- Compress Section -->
                <Border Margin="0,24,0,0" Translation="0,0,16" Style="{StaticResource SectionCardStyle}">
                    <Border.Shadow>
                        <ThemeShadow />
                    </Border.Shadow>
                    <StackPanel>
                        <StackPanel Margin="0,0,0,4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="0,0,12,0" VerticalAlignment="Center" Foreground="{ThemeResource BrushPrimary}" FontSize="24" FontFamily="Segoe MDL2 Assets" Text="" />
                                <TextBlock Margin="0" VerticalAlignment="Center" Style="{StaticResource SectionTitleStyle}" Text="Compress Folder" />
                            </StackPanel>
                            <TextBlock Style="{StaticResource SectionDescriptionStyle}" Text="Compress a folder into SARC format with Yaz0 (.szs) compression, or just SARC without Yaz0" />
                        </StackPanel>
                        <StackPanel Margin="0,16,0,0">
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Folder Path" />
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="CompressInputPath" Style="{StaticResource FilePathTextBoxStyle}" PlaceholderText="No folder selected" Grid.Column="0" />
                                <Button Click="PickCompressFolder_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Browse" Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,16,0,0">
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Output File Path" />
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="CompressOutputPath" Style="{StaticResource FilePathTextBoxStyle}" PlaceholderText="Auto-generated if empty" Grid.Column="0" />
                                <Button Click="PickCompressOutput_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Browse" Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,12,0,0">
                            <CheckBox x:Name="CompressNoYaz0Check" Content="Disable Yaz0 Compression (Compress to .sarc file)"
                                      AutomationProperties.AutomationId="Material_Unchecked"
                                      Style="{StaticResource CheckBoxStyle}" />
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Compression Level (0-9)" />
                            <Slider x:Name="CompressLevelSlider" SnapsTo="Ticks" TickFrequency="1" StepFrequency="1" Value="1" Maximum="9" Minimum="0" />
                            <TextBlock Margin="0,4,0,0" HorizontalAlignment="Center" Foreground="{ThemeResource BrushOnSurfaceVariant}" FontSize="12" Text="1 (Default)" />
                        </StackPanel>
                        <Button Click="CompressAction_Click" Translation="0,0,8" Margin="0,16,0,0" Style="{StaticResource PrimaryButtonStyle}" Content="Compress Folder" />
                    </StackPanel>
                </Border>

                <!-- Extract Section -->
                <Border Margin="0,24,0,0" Translation="0,0,16" Style="{StaticResource SectionCardStyle}">
                    <Border.Shadow>
                        <ThemeShadow />
                    </Border.Shadow>
                    <StackPanel>
                        <StackPanel Margin="0,0,0,4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="0,0,12,0" VerticalAlignment="Center" Foreground="{ThemeResource BrushAccent}" FontSize="24" FontFamily="Segoe MDL2 Assets" Text="" />
                                <TextBlock Margin="0" VerticalAlignment="Center" Style="{StaticResource SectionTitleStyle}" Text="Extract Archive (SARC/Yaz0)" />
                            </StackPanel>
                            <TextBlock Style="{StaticResource SectionDescriptionStyle}" Text="Extract SARC or Yaz0-compressed archive contents to a folder" />
                        </StackPanel>
                        <StackPanel Margin="0,16,0,0">
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Archive File" />
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="ExtractInputPath" Style="{StaticResource FilePathTextBoxStyle}" PlaceholderText="No archive selected (.sarc, .arc, .szs, .pack)" Grid.Column="0" />
                                <Button Click="PickExtractFile_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Browse" Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,12,0,0">
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Destination Folder" />
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="ExtractOutputPath" Style="{StaticResource FilePathTextBoxStyle}" PlaceholderText="Same as source if empty" Grid.Column="0" />
                                <Button Click="PickExtractOutputFolder_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Browse" Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <Button Click="ExtractAction_Click" Translation="0,0,8" Margin="0,16,0,0" Style="{StaticResource PrimaryButtonStyle}" Content="Extract Archive" />
                    </StackPanel>
                </Border>

                <!-- Batch Extract Section -->
                <Border Margin="0,24,0,0" Translation="0,0,16" Style="{StaticResource SectionCardStyle}">
                    <Border.Shadow>
                        <ThemeShadow />
                    </Border.Shadow>
                    <StackPanel>
                        <StackPanel Margin="0,0,0,4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="0,0,12,0" VerticalAlignment="Center" Foreground="{ThemeResource BrushSecondary}" FontSize="24" FontFamily="Segoe MDL2 Assets" Text="" />
                                <TextBlock Margin="0" VerticalAlignment="Center" Style="{StaticResource SectionTitleStyle}" Text="Batch Extract" />
                            </StackPanel>
                            <TextBlock Style="{StaticResource SectionDescriptionStyle}" Text="Extract multiple SARC or Yaz0-compressed archives at once" />
                        </StackPanel>
                        <StackPanel Margin="0,16,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock VerticalAlignment="Center" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Grid.Column="0" Text="Archive Files" />
                                <Button Click="BatchAddFiles_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Add Archives" Grid.Column="1" />
                            </Grid>
                            <Border Margin="0,12,0,0" Padding="16" MinHeight="120" CornerRadius="6" BorderThickness="1" BorderBrush="{ThemeResource BrushOutline}" Background="{ThemeResource BrushSurfaceVariant}">
                                <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                    <StackPanel x:Name="BatchFileListPanel">
                                        <TextBlock x:Name="BatchPlaceholderText" FontStyle="Italic" Foreground="{ThemeResource BrushOnSurfaceVariant}" Text="No archives selected" />
                                    </StackPanel>
                                </ScrollViewer>
                            </Border>
                        </StackPanel>
                        <StackPanel Margin="0,12,0,0">
                            <TextBlock Margin="0,0,0,12" Foreground="{ThemeResource BrushOnSurface}" FontWeight="SemiBold" FontSize="13" Text="Destination Folder" />
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="BatchOutputPath" Style="{StaticResource FilePathTextBoxStyle}" PlaceholderText="Same as source folders" Grid.Column="0" />
                                <Button Click="PickBatchOutputFolder_Click" Style="{StaticResource SecondaryButtonStyle}" Content="Browse" Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <CheckBox x:Name="BatchSubfolderCheck" Margin="0,12,0,0" Foreground="{ThemeResource BrushOnSurface}" IsChecked="True" Content="Extract each archive to its own subfolder" />
                        <Button Click="BatchAction_Click" Translation="0,0,8" Margin="0,16,0,0" Style="{StaticResource PrimaryButtonStyle}" Content="Batch Extract All" />
                    </StackPanel>
                </Border>

                <Border Margin="0,32,0,24" Padding="20" CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource BrushOutline}" Background="{ThemeResource BrushSurfaceVariant}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Margin="0,0,16,0" VerticalAlignment="Center" Foreground="{ThemeResource BrushPrimary}" FontSize="20" FontFamily="Segoe MDL2 Assets" Text="" />
                        <TextBlock Grid.Column="1" VerticalAlignment="Center" Foreground="{ThemeResource BrushOnSurfaceVariant}" TextWrapping="Wrap">
                            <Run Text="Supported formats: .sarc, .arc, .szs, .pack. Designed for Nintendo Switch and Wii U files." />
                        </TextBlock>
                    </Grid>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <Color x:Key="ColorPrimary">#FF0078D4</Color>
                    <Color x:Key="ColorOnPrimary">#FFFFFFFF</Color>
                    <Color x:Key="ColorSecondary">#FF00CC6A</Color>
                    <Color x:Key="ColorOnSecondary">#FFFFFFFF</Color>
                    <Color x:Key="ColorAccent">#FFFF6B35</Color>
                    <Color x:Key="ColorOnAccent">#FFFFFFFF</Color>
                    <Color x:Key="ColorSurface">#FFFFFFFF</Color>
                    <Color x:Key="ColorOnSurface">#FF1F1F1F</Color>
                    <Color x:Key="ColorSurfaceVariant">#FFF5F5F5</Color>
                    <Color x:Key="ColorOnSurfaceVariant">#FF4A4A4A</Color>
                    <Color x:Key="ColorBackground">#FFFAFAFA</Color>
                    <Color x:Key="ColorOutline">#FFE0E0E0</Color>
                    <Color x:Key="ColorOutlineVariant">#FFF0F0F0</Color>
                    <SolidColorBrush x:Key="BrushPrimary" Color="{ThemeResource ColorPrimary}" />
                    <SolidColorBrush x:Key="BrushOnPrimary" Color="{ThemeResource ColorOnPrimary}" />
                    <SolidColorBrush x:Key="BrushSecondary" Color="{ThemeResource ColorSecondary}" />
                    <SolidColorBrush x:Key="BrushOnSecondary" Color="{ThemeResource ColorOnSecondary}" />
                    <SolidColorBrush x:Key="BrushAccent" Color="{ThemeResource ColorAccent}" />
                    <SolidColorBrush x:Key="BrushOnAccent" Color="{ThemeResource ColorOnAccent}" />
                    <SolidColorBrush x:Key="BrushSurface" Color="{ThemeResource ColorSurface}" />
                    <SolidColorBrush x:Key="BrushOnSurface" Color="{ThemeResource ColorOnSurface}" />
                    <SolidColorBrush x:Key="BrushSurfaceVariant" Color="{ThemeResource ColorSurfaceVariant}" />
                    <SolidColorBrush x:Key="BrushOnSurfaceVariant" Color="{ThemeResource ColorOnSurfaceVariant}" />
                    <SolidColorBrush x:Key="BrushBackground" Color="{ThemeResource ColorBackground}" />
                    <SolidColorBrush x:Key="BrushOutline" Color="{ThemeResource ColorOutline}" />
                    <SolidColorBrush x:Key="BrushOutlineVariant" Color="{ThemeResource ColorOutlineVariant}" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <Color x:Key="ColorPrimary">#FF4CC2FF</Color>
                    <Color x:Key="ColorOnPrimary">#FF003350</Color>
                    <Color x:Key="ColorSecondary">#FF00E676</Color>
                    <Color x:Key="ColorOnSecondary">#FF003D1D</Color>
                    <Color x:Key="ColorAccent">#FFFF8A65</Color>
                    <Color x:Key="ColorOnAccent">#FF5C1A00</Color>
                    <Color x:Key="ColorSurface">#FF1E1E1E</Color>
                    <Color x:Key="ColorOnSurface">#FFE5E5E5</Color>
                    <Color x:Key="ColorSurfaceVariant">#FF2A2A2A</Color>
                    <Color x:Key="ColorOnSurfaceVariant">#FFCCCCCC</Color>
                    <Color x:Key="ColorBackground">#FF121212</Color>
                    <Color x:Key="ColorOutline">#FF3D3D3D</Color>
                    <Color x:Key="ColorOutlineVariant">#FF2F2F2F</Color>
                    <SolidColorBrush x:Key="BrushPrimary" Color="{ThemeResource ColorPrimary}" />
                    <SolidColorBrush x:Key="BrushOnPrimary" Color="{ThemeResource ColorOnPrimary}" />
                    <SolidColorBrush x:Key="BrushSecondary" Color="{ThemeResource ColorSecondary}" />
                    <SolidColorBrush x:Key="BrushOnSecondary" Color="{ThemeResource ColorOnSecondary}" />
                    <SolidColorBrush x:Key="BrushAccent" Color="{ThemeResource ColorAccent}" />
                    <SolidColorBrush x:Key="BrushOnAccent" Color="{ThemeResource ColorOnAccent}" />
                    <SolidColorBrush x:Key="BrushSurface" Color="{ThemeResource ColorSurface}" />
                    <SolidColorBrush x:Key="BrushOnSurface" Color="{ThemeResource ColorOnSurface}" />
                    <SolidColorBrush x:Key="BrushSurfaceVariant" Color="{ThemeResource ColorSurfaceVariant}" />
                    <SolidColorBrush x:Key="BrushOnSurfaceVariant" Color="{ThemeResource ColorOnSurfaceVariant}" />
                    <SolidColorBrush x:Key="BrushBackground" Color="{ThemeResource ColorBackground}" />
                    <SolidColorBrush x:Key="BrushOutline" Color="{ThemeResource ColorOutline}" />
                    <SolidColorBrush x:Key="BrushOutlineVariant" Color="{ThemeResource ColorOutlineVariant}" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>
            <Style x:Key="SectionCardStyle" TargetType="Border">
                <Style.Setters>
                    <Setter Property="Background" Value="{ThemeResource BrushSurface}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource BrushOutline}" />
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="CornerRadius" Value="8" />
                    <Setter Property="Padding" Value="24" />
                </Style.Setters>
            </Style>
            <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
                <Style.Setters>
                    <Setter Property="FontSize" Value="20" />
                    <Setter Property="FontWeight" Value="SemiBold" />
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnSurface}" />
                    <Setter Property="Margin" Value="0,0,0,8" />
                </Style.Setters>
            </Style>
            <Style x:Key="SectionDescriptionStyle" TargetType="TextBlock">
                <Style.Setters>
                    <Setter Property="FontSize" Value="14" />
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnSurfaceVariant}" />
                    <Setter Property="Margin" Value="0,0,0,16" />
                    <Setter Property="TextWrapping" Value="Wrap" />
                </Style.Setters>
            </Style>
            <Style x:Key="PrimaryButtonStyle" TargetType="Button">
                <Style.Setters>
                    <Setter Property="Background" Value="{ThemeResource BrushPrimary}" />
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnPrimary}" />
                    <Setter Property="CornerRadius" Value="8" />
                    <Setter Property="Padding" Value="24,12" />
                    <Setter Property="FontWeight" Value="SemiBold" />
                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                </Style.Setters>
            </Style>
            <Style x:Key="SecondaryButtonStyle" TargetType="Button">
                <Style.Setters>
                    <Setter Property="Background" Value="{ThemeResource BrushSurfaceVariant}" />
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnSurface}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource BrushOutline}" />
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="CornerRadius" Value="8" />
                    <Setter Property="Padding" Value="16,10" />
                    <Setter Property="HorizontalAlignment" Value="Left" />
                </Style.Setters>
            </Style>
            <Style x:Key="FilePathTextBoxStyle" TargetType="TextBox">
                <Style.Setters>
                    <Setter Property="Background" Value="{ThemeResource BrushSurfaceVariant}" />
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnSurface}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource BrushOutline}" />
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="CornerRadius" Value="6" />
                    <Setter Property="Padding" Value="12,10" />
                    <Setter Property="IsReadOnly" Value="True" />
                </Style.Setters>
            </Style>
            <Style x:Key="CheckBoxStyle" TargetType="CheckBox">
                <Style.Setters>
                    <Setter Property="Foreground" Value="{ThemeResource BrushOnSurface}" />
                </Style.Setters>
            </Style>
        </ResourceDictionary>
    </Page.Resources>
</Page>
